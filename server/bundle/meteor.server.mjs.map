{"version":3,"file":"meteor.server.mjs","sources":["../../imports/api/links.ts","../../imports/api/images.ts","../../imports/methods/links.ts","../react-refresh.ts","../main.ts"],"sourcesContent":["import { Mongo } from 'meteor/mongo';\n\nexport type Link = {\n    _id: string;\n    title: string;\n    url: string;\n    createdAt: Date;\n};\n\nexport const LinksCollection = new Mongo.Collection<Link>('links');\n","import { FilesCollection } from \"meteor/ostrio:files\";\n\nexport const FileCollection = new FilesCollection({\n    storagePath: `images`,\n    collectionName: \"images\",\n    // Disallow Client to execute remove, use the Meteor.method\n    allowClientCode: false,\n});\n","import { _createClientMethod } from \"meteor/zodern:relay/client\";\nexport const getLinks = _createClientMethod(\"links.get\");\nexport const testMessage = _createClientMethod(\"testing.zodern\");","import { Meteor } from \"meteor/meteor\";\nimport { WebAppInternals } from \"meteor/webapp\";\nimport { getConfig } from \"meteor/jorgenvatle:vite-bundler/loading/vite-connection-handler\";\n/**\n * Inject React Refresh snippet into HTML served by Meteor in development mode.\n * Without this snippet, React HMR will not work with Meteor-Vite.\n *\n * {@link https://github.com/JorgenVatle/meteor-vite/issues/29}\n * {@link https://github.com/vitejs/vite-plugin-react/issues/11#discussion_r430879201}\n */\nif (Meteor.isDevelopment) {\n    WebAppInternals.registerBoilerplateDataCallback(\n        \"react-preamble\",\n        async (request, data) => {\n            const { host, port } = await getConfig();\n            data.dynamicHead = data.dynamicHead || \"\";\n            data.dynamicHead += `\n<script type=\"module\">\n  import RefreshRuntime from \"http://${host}:${port}/@react-refresh\"\n  RefreshRuntime.injectIntoGlobalHook(window)\n  window.$RefreshReg$ = () => {}\n  window.$RefreshSig$ = () => (type) => type\n  window.__vite_plugin_react_preamble_installed__ = true\n</script>\n    `;\n        },\n    );\n}\n","import { Meteor } from \"meteor/meteor\";\nimport { LinksCollection } from \"../imports/api/links\";\nimport { FileCollection } from \"../imports/api/images\";\nimport \"/imports/methods/links\";\nimport \"/server/react-refresh.ts\";\n\nasync function insertLink({ title, url }: { title: string; url: string }) {\n    await LinksCollection.insertAsync({ title, url, createdAt: new Date() });\n}\n\nMeteor.startup(async () => {\n    FileCollection.find();\n    // If the Links collection is empty, add some data.\n    if ((await LinksCollection.find().countAsync()) === 0) {\n        await insertLink({\n            title: \"Do the Tutorial\",\n            url: \"https://www.meteor.com/tutorials/react/creating-an-app\",\n        });\n\n        await insertLink({\n            title: \"Follow the Guide\",\n            url: \"https://guide.meteor.com\",\n        });\n\n        await insertLink({\n            title: \"Read the Docs\",\n            url: \"https://docs.meteor.com\",\n        });\n\n        await insertLink({\n            title: \"Discussions\",\n            url: \"https://forums.meteor.com\",\n        });\n    }\n\n    // We publish the entire Links collection to all clients.\n    // In order to be fetched in real-time to the clients\n    Meteor.publish(\"links\", function () {\n        return LinksCollection.find();\n    });\n});\n"],"names":[],"mappings":";;;;;;AASO,MAAM,kBAAkB,IAAI,MAAM,WAAiB,OAAO;ACPpD,MAAA,iBAAiB,IAAI,gBAAgB;AAAA,EAC9C,aAAa;AAAA,EACb,gBAAgB;AAAA;AAAA,EAEhB,iBAAiB;AACrB,CAAC;ACNuB,oBAAoB,WAAW;AAC5B,oBAAoB,gBAAgB;ACQ/D,IAAI,OAAO,eAAe;AACN,kBAAA;AAAA,IACZ;AAAA,IACA,OAAO,SAAS,SAAS;AACrB,YAAM,EAAE,MAAM,SAAS,MAAM,UAAU;AAClC,WAAA,cAAc,KAAK,eAAe;AACvC,WAAK,eAAe;AAAA;AAAA,uCAEO,IAAI,IAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAO3C;AAAA,EAAA;AAER;ACrBA,eAAe,WAAW,EAAE,OAAO,OAAuC;AAChE,QAAA,gBAAgB,YAAY,EAAE,OAAO,KAAK,WAAW,oBAAI,KAAK,EAAA,CAAG;AAC3E;AAEA,OAAO,QAAQ,YAAY;AACvB,iBAAe,KAAK;AAEpB,MAAK,MAAM,gBAAgB,KAAO,EAAA,WAAA,MAAkB,GAAG;AACnD,UAAM,WAAW;AAAA,MACb,OAAO;AAAA,MACP,KAAK;AAAA,IAAA,CACR;AAED,UAAM,WAAW;AAAA,MACb,OAAO;AAAA,MACP,KAAK;AAAA,IAAA,CACR;AAED,UAAM,WAAW;AAAA,MACb,OAAO;AAAA,MACP,KAAK;AAAA,IAAA,CACR;AAED,UAAM,WAAW;AAAA,MACb,OAAO;AAAA,MACP,KAAK;AAAA,IAAA,CACR;AAAA,EACL;AAIO,SAAA,QAAQ,SAAS,WAAY;AAChC,WAAO,gBAAgB;EAAK,CAC/B;AACL,CAAC;"}